<!-- Pandora settings xml file -->

<pandora>

    <!-- Primary clustering algorithm runs Clustering algorithm -->
    <algorithm type = "PrimaryClustering">
        <algorithm type = "Clustering" description = "ClusterFormation" instance = "mainClustering">
            <!-- Non seed track related -->
            <HitSortingStrategy>0</HitSortingStrategy>
            <ClusterFormationStrategy>0</ClusterFormationStrategy>
            <SameLayerPadWidthsECal>2.8</SameLayerPadWidthsECal>
            <SameLayerPadWidthsHCal>1.8</SameLayerPadWidthsHCal>
            <LayersToStepBackECal>3</LayersToStepBackECal>
            <LayersToStepBackHCal>3</LayersToStepBackHCal>
            <TanConeAngleECal>0.3</TanConeAngleECal>
            <TanConeAngleHCal>0.5</TanConeAngleHCal>
            <AdditionalPadWidthsECal>2.5</AdditionalPadWidthsECal>
            <AdditionalPadWidthsHCal>2.5</AdditionalPadWidthsHCal>

            <!-- Seed track related -->
            <ClusterSeedStrategy>3</ClusterSeedStrategy>
            <ShouldUseTrackSeed>true</ShouldUseTrackSeed>
            <TrackSeedCutOffLayer>0</TrackSeedCutOffLayer>
            <MaxLayersToTrackSeed>3</MaxLayersToTrackSeed>
        </algorithm>

        <!-- Topological associations, to be run after clustering -->
        <algorithm type = "TopologicalAssociation" description = "ClusterAssociation" instance = "mainTopologicalAssoc">
            <associationAlgorithms>
                <algorithm type = "LoopingTracks"></algorithm>
                <algorithm type = "BrokenTracks"></algorithm>
                <algorithm type = "ShowerMipMerging"></algorithm>
                <algorithm type = "ShowerMipMerging2"></algorithm>
                <algorithm type = "BackscatteredTracks"></algorithm>
                <algorithm type = "BackscatteredTracks2"></algorithm>
                <algorithm type = "ShowerMipMerging3"></algorithm>
                <algorithm type = "ShowerMipMerging4"></algorithm>
                <algorithm type = "ProximityBasedMerging">
                    <algorithm type = "TrackClusterAssociation"></algorithm>
                </algorithm>
                <algorithm type = "ConeBasedMerging">
                    <algorithm type = "TrackClusterAssociation"></algorithm>
                </algorithm>
                <algorithm type = "SoftClusterMerging">
                    <algorithm type = "TrackClusterAssociation"></algorithm>
                    <ShouldUsePhotonClusters> false </ShouldUsePhotonClusters>
                    <PhotonClusterListName> photonClusters </PhotonClusterListName>
                </algorithm>
                <algorithm type = "IsolatedHitMerging">
                    <ShouldUsePhotonClusters> false </ShouldUsePhotonClusters>
                    <PhotonClusterListName> photonClusters </PhotonClusterListName>
                </algorithm>
            </associationAlgorithms>
        </algorithm>
        <clusterListName> PrimaryClusterList </clusterListName>
    </algorithm>

    <!-- Reclustering algorithm runs multiple Clustering algorithms -->
    <algorithm type = "Reclustering">
        <reclusteringAlgorithms>

            <algorithm type = "SplitTrackAssociations" instance = "mySplitInstance">
                <clusteringAlgorithms>
                    <algorithm type = "Clustering" instance = "mainClustering"/>
                    <algorithm type = "Clustering"/>
                </clusteringAlgorithms>
                <algorithm type = "TopologicalAssociation" description = "ClusterAssociation" instance = "mainTopologicalAssoc"></algorithm>
                <algorithm type = "TrackClusterAssociation" description = "TrackClusterAssociation"></algorithm>
            </algorithm>

            <algorithm type = "ResolveTrackAssociations">
                <clusteringAlgorithms>
                    <algorithm type = "Clustering" instance = "mainClustering"/>
                    <algorithm type = "Clustering"/>
                </clusteringAlgorithms>
                <NTrackAssociationsToResolve>2</NTrackAssociationsToResolve>
                <algorithm type = "TopologicalAssociation" description = "ClusterAssociation" instance = "mainTopologicalAssoc"></algorithm>
                <algorithm type = "TrackClusterAssociation" description = "TrackClusterAssociation"></algorithm>
                <algorithm type = "SplitTrackAssociations" description = "SplitTrackClusterAssociation" instance = "mySplitInstance"></algorithm>
            </algorithm>

        </reclusteringAlgorithms>
    </algorithm>

    <!-- Create the final particle flow objects -->
    <algorithm type = "PfoConstruction">
        <algorithm type = "ClusterPreparation" description = "ClusterPreparation"></algorithm>
        <algorithm type = "TrackPreparation" description = "TrackPreparation"></algorithm>
        <algorithm type = "PfoCreation" description = "PfoCreation">
            <ShouldUsePhotonClusters> false </ShouldUsePhotonClusters>
            <PhotonClusterListName> photonClusters </PhotonClusterListName>
        </algorithm>
    </algorithm>

    <IsMonitoringEnabled> true </IsMonitoringEnabled>
    <MipNCellsForNearbyHit> 2 </MipNCellsForNearbyHit>
    <IsolationDensityWeightCutECal> 0.1 </IsolationDensityWeightCutECal>
    <IsolationDensityWeightCutHCal> 0.1 </IsolationDensityWeightCutHCal>
    <ShouldUseSimpleIsolationScheme> false </ShouldUseSimpleIsolationScheme>
    <IsolationCutDistanceECal> 25. </IsolationCutDistanceECal>
    <IsolationCutDistanceHCal> 200. </IsolationCutDistanceHCal>
    <IsolationMaxNearbyHits> 2 </IsolationMaxNearbyHits>
</pandora>
